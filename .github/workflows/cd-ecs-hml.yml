name: CD ECS - HML

on:
  workflow_call:
    inputs:
      component_name:
        description: Nome do componente
        required: true
        type: string

      product_name:
        description: Nome do produto
        required: true
        type: string

      product_url:
        description: URL do produto
        required: true
        type: string

      aws_account:
        description: Conta AWS destino
        required: true
        type: string

      database:
        description: Possui banco de dados
        required: true
        type: string

jobs:
  provision-hml:
    name: Provisionar ECS (HML)
    runs-on: ubuntu-latest

    steps:
      - name: InÃ­cio do provisionamento
        run: |
          echo "ðŸš€ Iniciando provisionamento ECS - HML"
          echo "-------------------------------------"
          echo "Componente: ${{ inputs.component_name }}"
          echo "Produto: ${{ inputs.product_name }}"
          echo "URL: https://${{ inputs.product_url }}.teddy360.com.br"
          echo "Conta AWS: ${{ inputs.aws_account }}"
          echo "Banco de dados: ${{ inputs.database }}"
          echo "-------------------------------------"

      - name: Simular criaÃ§Ã£o de recursos
        run: |
          echo "ðŸ“¦ Criando ECS Cluster..."
          sleep 1
          echo "ðŸ“¦ Criando ECS Service..."
          sleep 1
          echo "ðŸ“¦ Criando Load Balancer..."
          sleep 1
          echo "ðŸ“¦ Criando CloudFront..."
          sleep 1
          echo "ðŸ“¦ Criando Route53..."
          sleep 1

      - name: FinalizaÃ§Ã£o
        run: |
          echo "âœ… Provisionamento HML finalizado com sucesso (simulado)"
